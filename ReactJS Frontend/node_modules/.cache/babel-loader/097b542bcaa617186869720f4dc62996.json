{"ast":null,"code":"var _jsxFileName = \"/Users/bulavkin/Developer/\\u0412\\u0435\\u0431-\\u0440\\u0430\\u0437\\u0440\\u0430\\u0431\\u043E\\u0442\\u043A\\u0430/\\u041A\\u0443\\u0440\\u0441\\u043E\\u0432\\u0430\\u044F \\u0440\\u0430\\u0431\\u043E\\u0442\\u0430 2023/ReactJS FrontEnd/src/pages/Cards.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { Link, useLocation } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { confirmAlert } from \"react-confirm-alert\";\nimport \"react-confirm-alert/src/react-confirm-alert.css\";\nimport \"../styles/Cards.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Cards() {\n  _s();\n\n  const [rows, setRows] = useState([]);\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const location = useLocation();\n  useEffect(() => {\n    loadRows();\n  }, []);\n  useEffect(() => {\n    const queryParams = new URLSearchParams(location.search);\n    const searchQuery = queryParams.get(\"search\");\n    setSearchTerm(searchQuery || \"\");\n  }, [location]);\n\n  const loadRows = async () => {\n    try {\n      const response = await axios.get(\"http://localhost:8080/wiki\");\n      setRows(response.data);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const deleteRow = async id => {\n    confirmAlert({\n      title: \"Подтвердите удаление\",\n      message: \"Вы действительно хотите удалить эту публикацию?\",\n      buttons: [{\n        label: \"Отмена\",\n        onClick: () => {}\n      }, {\n        label: \"Удалить\",\n        onClick: () => {\n          axios.delete(`http://localhost:8080/wiki/delete/${id}`).then(() => {\n            loadRows();\n          });\n        }\n      }]\n    });\n  };\n\n  const truncateDescription = (text, limit) => {\n    if (text.length <= limit) {\n      return text;\n    }\n\n    return text.substring(0, limit) + \"...\";\n  };\n\n  const handleSearchChange = event => {\n    setSearchTerm(event.target.value);\n  };\n\n  const filteredRows = rows.filter(row => row.title.toLowerCase().includes(searchTerm.toLowerCase()) || row.description.toLowerCase().includes(searchTerm.toLowerCase()));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-container\",\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"\\u041F\\u043E\\u0438\\u0441\\u043A...\",\n        value: searchTerm,\n        onChange: handleSearchChange,\n        className: \"search-input\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card-container\",\n      children: filteredRows.length > 0 ? filteredRows.map((row, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card\",\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: `/wiki/${row.id}`,\n          className: \"card-link\",\n          children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n            children: row.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"description\",\n            children: truncateDescription(row.description, 80)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 29\n        }, this)\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 25\n      }, this)) : /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"no-results\",\n        children: \"\\u041D\\u0435\\u0442 \\u0440\\u0435\\u0437\\u0443\\u043B\\u044C\\u0442\\u0430\\u0442\\u043E\\u0432\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Cards, \"3IOMOHy3g4F2HCnwwHghQEdm0SA=\", false, function () {\n  return [useLocation];\n});\n\n_c = Cards;\n\nvar _c;\n\n$RefreshReg$(_c, \"Cards\");","map":{"version":3,"names":["React","useState","useEffect","Link","useLocation","axios","confirmAlert","Cards","rows","setRows","searchTerm","setSearchTerm","location","loadRows","queryParams","URLSearchParams","search","searchQuery","get","response","data","error","console","deleteRow","id","title","message","buttons","label","onClick","delete","then","truncateDescription","text","limit","length","substring","handleSearchChange","event","target","value","filteredRows","filter","row","toLowerCase","includes","description","map","index"],"sources":["/Users/bulavkin/Developer/Веб-разработка/Курсовая работа 2023/ReactJS FrontEnd/src/pages/Cards.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Link, useLocation } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { confirmAlert } from \"react-confirm-alert\";\nimport \"react-confirm-alert/src/react-confirm-alert.css\";\nimport \"../styles/Cards.css\";\n\nexport default function Cards() {\n    const [rows, setRows] = useState([]);\n    const [searchTerm, setSearchTerm] = useState(\"\");\n    const location = useLocation();\n\n    useEffect(() => {\n        loadRows();\n    }, []);\n\n    useEffect(() => {\n        const queryParams = new URLSearchParams(location.search);\n        const searchQuery = queryParams.get(\"search\");\n        setSearchTerm(searchQuery || \"\");\n    }, [location]);\n\n    const loadRows = async () => {\n        try {\n            const response = await axios.get(\"http://localhost:8080/wiki\");\n            setRows(response.data);\n        } catch (error) {\n            console.error(error);\n        }\n    };\n\n    const deleteRow = async (id) => {\n        confirmAlert({\n            title: \"Подтвердите удаление\",\n            message: \"Вы действительно хотите удалить эту публикацию?\",\n            buttons: [\n                {\n                    label: \"Отмена\",\n                    onClick: () => {},\n                },\n                {\n                    label: \"Удалить\",\n                    onClick: () => {\n                        axios.delete(`http://localhost:8080/wiki/delete/${id}`).then(() => {\n                            loadRows();\n                        });\n                    },\n                },\n            ],\n        });\n    };\n\n    const truncateDescription = (text, limit) => {\n        if (text.length <= limit) {\n            return text;\n        }\n        return text.substring(0, limit) + \"...\";\n    };\n\n    const handleSearchChange = (event) => {\n        setSearchTerm(event.target.value);\n    };\n\n    const filteredRows = rows.filter(\n        (row) =>\n            row.title.toLowerCase().includes(searchTerm.toLowerCase()) ||\n            row.description.toLowerCase().includes(searchTerm.toLowerCase())\n    );\n\n    return (\n        <div>\n            <div className=\"search-container\">\n                <input\n                    type=\"text\"\n                    placeholder=\"Поиск...\"\n                    value={searchTerm}\n                    onChange={handleSearchChange}\n                    className=\"search-input\"\n                />\n            </div>\n            <div className=\"card-container\">\n                {filteredRows.length > 0 ? (\n                    filteredRows.map((row, index) => (\n                        <div className=\"card\" key={index}>\n                            <Link to={`/wiki/${row.id}`} className=\"card-link\">\n                                <h5>{row.title}</h5>\n                                <p className=\"description\">{truncateDescription(row.description, 80)}</p>\n                            </Link>\n                        </div>\n                    ))\n                ) : (\n                    <p className=\"no-results\">Нет результатов</p>\n                )}\n            </div>\n            <br/>\n            <br/>\n        </div>\n    );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}